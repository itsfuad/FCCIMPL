// Test the IDEN{} ambiguity resolution
// Before: if x {} was ambiguous - struct literal or if block?
// Now: {} in expressions MUST be literal (with content), standalone {} is a block

// Test 1: If statement with identifier followed by block (NO AMBIGUITY!)
let x := 10;
if x {
    let y := 20;
}

// Test 2: If statement with expression and block
if x > 5 {
    let z := 30;
}

// Test 3: Anonymous struct literal - clearly a literal
let p := {
    .x = 1,
    .y = 2,
};

// Test 4: Anonymous map literal - clearly a literal
let m := {
    "a" => 1,
    "b" => 2,
};

// Test 5: Type cast for explicit typing
type Point struct {
    .x: i32,
    .y: i32,
};

let p2 := {
    .x = 10,
    .y = 20,
} as Point;

// Test 6: In expression context, {} must have content
// This would be an error: let bad := {};
// But this works:
let empty := { .x = 0 };
