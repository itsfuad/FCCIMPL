// Test anonymous struct and map literals with new {} syntax

// Test 1: Anonymous struct literal
let p1 := {
    .x = 10,
    .y = 20,
};

// Test 2: Anonymous struct with type cast
type Point struct {
    .x: i32,
    .y: i32,
};

let p2 := {
    .x = 5,
    .y = 15,
} as Point;

// Test 3: Anonymous struct with type annotation
let p3: Point = {
    .x = 100,
    .y = 200,
};

// Test 4: Anonymous map literal
let m1 := {
    "a" => 1,
    "b" => 2,
    "c" => 3,
};

// Test 5: Anonymous map with type cast
let m2 := {
    "x" => 10,
    "y" => 20,
} as map[str]i32;

// Test 6: Anonymous map with type annotation
let m3: map[str]i32 = {
    "foo" => 100,
    "bar" => 200,
};

// Test 7: If statement with block (no ambiguity!)
if p1 {
    let temp := 42;
}

// Test 8: Nested anonymous struct
let nested := {
    .name = "test",
    .point = {
        .x = 1,
        .y = 2,
    },
};

// Test 9: Empty struct
let empty := {};

// Test 10: Legacy .{} syntax (backward compatibility)
let legacy := .{
    .a = 1,
    .b = 2,
};
